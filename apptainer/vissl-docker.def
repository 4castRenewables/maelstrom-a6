# Always use cudnn version 7
Bootstrap: docker-daemon
From: vissl:latest

%environment
    export PATH="/usr/local/cuda-10.2/bin:/usr/local/bin:/venv/bin:${PATH}"

%test
    # Check correct installation
    which python
    python --version
    python -c 'import torch, apex, vissl, cv2'

%runscript
    echo "[$NOW] Running VISSL"
    echo "Arguments: $*"
    exec "$@"

%labels
    Author Fabian Emmerich
    Version v1.6.0-cu10.2-py3.8

%help
    Provides the VISSL library and all required dependencies.
    The git repository is located at `/opt/vissl`.
